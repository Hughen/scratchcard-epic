const defaultBrushData = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMi0zMVQyMjo1OTozNyswMTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxNy0xMi0zMVQyMjo1OTozNyswMTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTctMTItMzFUMjI6NTk6MzcrMDE6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzhmNTE3OTUtZTA1My1lMjQ5LTkwMjYtN2IwNTRkZDI4NDhjIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzNjMzRmNjgtYTljYi00MzQ3LWFiOWUtZWVh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";

export default class Brush {
  private px: number;
  private py: number;
  readonly ctx: CanvasRenderingContext2D;
  private brushImage: HTMLImageElement;

  constructor(ctx: CanvasRenderingContext2D, brush?: HTMLImageElement) {
    this.px = 0;
    this.py = 0;
    this.ctx = ctx;
    this.brushImage = brush || this.getDefaultBrush();
  }

  public moveBrushPos(x: number, y: number): void {
    this.px = x;
    this.py = y;
  }

  public brush(): void {
    const angle =  Math.atan2(this.px, this.py);
    this.ctx.translate(this.px, this.py);
    this.ctx.rotate(angle);
    this.ctx.drawImage(this.brushImage, -(this.brushImage.width / 2),
      -(this.brushImage.height / 2));
  }

  private getDefaultBrush(): HTMLImageElement  {
    const img = new Image();
    img.alt = "";
    img.src = defaultBrushData;
    return img;
  }
}
